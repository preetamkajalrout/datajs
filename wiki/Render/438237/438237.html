<div class="wikidoc"><h1>Custom OData httpClient</h1>For OData-related functionality, datajs uses the HTTP component specified directly in the API call that needs it, or in OData.defaultHttpClient. This gives developers the opportunity to replace or augment the default behavior as necessary.<br /><br />The following sample shows how to create an HTTP client component that adds a query string parameter to every request.<br /><br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Green;">// During page initialization...</span>

<span style="color:Green;">// Capture the current http client object.</span>
<span style="color:Blue;">var</span> oldClient = OData.defaultHttpClient;

<span style="color:Green;">// Create a new client object that will add a query string parameter.</span>
<span style="color:Blue;">var</span> myClient = {
    request: <span style="color:Blue;">function</span> (request, success, error) {
        <span style="color:Green;">// Add a &#39;?&#39; if there is no query string; separate with &#39;&amp;&#39; otherwise.</span>
        <span style="color:Blue;">if</span> (request.requestUri.indexOf(<span style="color:#A31515;">&quot;?&quot;</span>) === -1) {
            request.requestUri += <span style="color:#A31515;">&quot;?&quot;</span>;
        } <span style="color:Blue;">else</span> {
            request.requestUri += <span style="color:#A31515;">&quot;&amp;&quot;</span>;
        }

        <span style="color:Green;">// Add our own parameter.</span>
        request.requestUri += <span style="color:#A31515;">&quot;something=another&quot;</span>;

        <span style="color:Green;">// Call back into the original http client.</span>
        <span style="color:Blue;">return</span> oldClient.request(request, success, error);
    }
};

<span style="color:Green;">// We can either pass myClient explicitly, or set it globally for the page as the default:</span>
OData.defaultHttpClient = myClient;
</pre></div></div><div class="ClearBoth"></div>