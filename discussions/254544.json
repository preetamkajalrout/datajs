[
  {
    "Id": "599958",
    "ThreadId": "254544",
    "Html": "\r\n<pre>Hi,</pre>\r\n<pre>When trying to POST a batch I get the following error:</pre>\r\n<pre><br></pre>\r\n<pre><span style=\"white-space:pre\">\t</span>&quot;Serialization of batches of type complex is not supported&quot;</pre>\r\n<pre><br></pre>\r\n<pre>The code I'm using to post the batch is as follows. I have included in the function a single POST which is successful</pre>\r\n<pre><br></pre>\r\n<pre><div style=\"color:black; background-color:white\"><pre>       <span style=\"color:blue\">function</span> CreateInvoice() {\r\n            <span style=\"color:blue\">var</span> invoice = { <span style=\"color:#a31515\">&quot;SecondReference&quot;</span>: <span style=\"color:#a31515\">&quot;00000909&quot;</span>, <span style=\"color:#a31515\">&quot;TransactionReference&quot;</span>: <span style=\"color:#a31515\">&quot;INV00003&quot;</span>, <span style=\"color:#a31515\">&quot;GoodsValueInAccountCurrency&quot;</span>: <span style=\"color:#a31515\">&quot;236&quot;</span>, <span style=\"color:#a31515\">&quot;TransDateAsString&quot;</span>: <span style=\"color:#a31515\">&quot;07/04/2011&quot;</span> };\r\n \r\n            OData.request(\r\n            {\r\n                headers: { Accept: <span style=\"color:#a31515\">&quot;application/json&quot;</span> },\r\n                requestUri: <span style=\"color:#a31515\">&quot;http://localhost:52731/PurchaseService.svc/PLPostedSupplierTrans&quot;</span>,\r\n                method: <span style=\"color:#a31515\">&quot;POST&quot;</span>,\r\n                data: invoice\r\n            },\r\n            <span style=\"color:blue\">function</span> (value, response) {\r\n                alert(<span style=\"color:#a31515\">&quot;Single Post Successful&quot;</span>);\r\n            },\r\n            <span style=\"color:blue\">function</span> (err) {\r\n                alert(<span style=\"color:#a31515\">&quot;Error occurred &quot;</span> &#43; err.message);\r\n            });\r\n \r\n            OData.request(\r\n            {\r\n                headers: { Accept: <span style=\"color:#a31515\">&quot;application/json&quot;</span> },\r\n                requestUri: <span style=\"color:#a31515\">&quot;http://localhost:52731/PurchaseService.svc/$batch&quot;</span>,\r\n                method: <span style=\"color:#a31515\">&quot;POST&quot;</span>,\r\n                data: { _batchRequests: [\r\n                      { _changeRequests: [\r\n                        { requestUri: <span style=\"color:#a31515\">&quot;PLPostedSupplierTrans&quot;</span>, method: <span style=\"color:#a31515\">&quot;POST&quot;</span>, data: invoice },\r\n                        { requestUri: <span style=\"color:#a31515\">&quot;PLPostedSupplierTrans&quot;</span>, method: <span style=\"color:#a31515\">&quot;POST&quot;</span>, data: invoice }\r\n                      ]\r\n                      }\r\n                      ]\r\n                }\r\n            },\r\n            <span style=\"color:blue\">function</span> (value, response) {\r\n                alert(<span style=\"color:#a31515\">&quot;Batch Post Successful&quot;</span>);\r\n            },\r\n            <span style=\"color:blue\">function</span> (err) {\r\n                alert(<span style=\"color:#a31515\">&quot;Error occurred &quot;</span> &#43; err.message);\r\n            }, OData.batchHandler);\r\n \r\n        }\r\n</pre>\r\n<pre>Can anyone shed any light?</pre>\r\n<pre>Thanks</pre>\r\n</div>\r\n</pre>\r\n",
    "PostedDate": "2011-04-19T12:41:52.893-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "599985",
    "ThreadId": "254544",
    "Html": "<p>Hi scottseanjack,</p>\n<p>The problem is that you are missing an underscore ( _ ) in the _batchRequests and _changeRequests identifiers.&nbsp;Instead of</p>\n<div style=\"background-color: white; color: black;\">\n<pre>OData.request(\r\n{\r\n    headers: { Accept: <span style=\"color: #a31515;\">\"application/json\"</span> },\r\n    requestUri: <span style=\"color: #a31515;\">\"http://localhost:52731/PurchaseService.svc/$batch\"</span>,\r\n    method: <span style=\"color: #a31515;\">\"POST\"</span>,\r\n    data: { _batchRequests: [\r\n                 { _changeRequests: [\r\n                     { requestUri: <span style=\"color: #a31515;\">\"PLPostedSupplierTrans\"</span>, method: <span style=\"color: #a31515;\">\"POST\"</span>, data: invoice },\r\n                     { requestUri: <span style=\"color: #a31515;\">\"PLPostedSupplierTrans\"</span>, method: <span style=\"color: #a31515;\">\"POST\"</span>, data: invoice }]\r\n                  }]\r\n    }\r\n},\r\n<span style=\"color: blue;\">function</span> (value, response) {\r\n    alert(<span style=\"color: #a31515;\">\"Batch Post Successful\"</span>);\r\n},\r\n<span style=\"color: blue;\">function</span> (err) {\r\n    alert(<span style=\"color: #a31515;\">\"Error occurred \"</span> + err.message);\r\n}, OData.batchHandler);\r\n\r\n</pre>\n</div>\n<p>It should be</p>\n<div style=\"background-color: white; color: black;\">\n<pre>OData.request(\r\n{\r\n    headers: { Accept: <span style=\"color: #a31515;\">\"application/json\"</span> },\r\n    requestUri: <span style=\"color: #a31515;\">\"http://localhost:52731/PurchaseService.svc/$batch\"</span>,\r\n    method: <span style=\"color: #a31515;\">\"POST\"</span>,\r\n    data: {<span style=\"color: #000000;\"> __batchRequests</span>: [\r\n                 { __changeRequests: [\r\n                     { requestUri: <span style=\"color: #a31515;\">\"PLPostedSupplierTrans\"</span>, method: <span style=\"color: #a31515;\">\"POST\"</span>, data: invoice },\r\n                     { requestUri: <span style=\"color: #a31515;\">\"PLPostedSupplierTrans\"</span>, method: <span style=\"color: #a31515;\">\"POST\"</span>, data: invoice }]\r\n                  }]\r\n    }\r\n},\r\n<span style=\"color: blue;\">function</span> (value, response) {\r\n    alert(<span style=\"color: #a31515;\">\"Batch Post Successful\"</span>);\r\n},\r\n<span style=\"color: blue;\">function</span> (err) {\r\n    alert(<span style=\"color: #a31515;\">\"Error occurred \"</span> + err.message);\r\n}, OData.batchHandler);</pre>\n</div>\n<p>You can get more details&nbsp;about the library's payload formats <a href=\"http://datajs.codeplex.com/wikipage?title=OData%20Payload%20Formats\" target=\"_blank\">here</a>.</p>\n<div id=\"_mcePaste\" class=\"mcePaste\" style=\"position: absolute; width: 1px; height: 1px; overflow: hidden; top: 0px; left: -10000px;\">ï»¿</div>\n<p>Regards,</p>\n<p>Alex Trigo.</p>",
    "PostedDate": "2011-04-19T13:41:51.59-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "600039",
    "ThreadId": "254544",
    "Html": "<p>Doh...Thanks Alex and thanks for the link&nbsp;</p>",
    "PostedDate": "2011-04-19T15:02:45.43-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]