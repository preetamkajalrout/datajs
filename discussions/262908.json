[
  {
    "Id": "633412",
    "ThreadId": "262908",
    "Html": "\r\n<p>Helllo codeplex community!</p>\r\n<p>I have some issues with creating a batch-&quot;GET&quot; request with dajajs. The request should query a web-methods</p>\r\n<p>Here's my code:</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">function</span> LoadWaterChartData(currentHostname,latitude,longitude) {\r\n    <span style=\"color:blue\">var</span> ratingServiceUri = <span style=\"color:#a31515\">&quot;http://&quot;</span> &#43; currentHostname &#43; <span style=\"color:#a31515\">&quot;/RatingDataService.svc/$batch&quot;</span>;\r\n    <span style=\"color:blue\">var</span> ratingRequestArray = <span style=\"color:blue\">new</span> Array();\r\n    <span style=\"color:blue\">var</span> nowDate = <span style=\"color:blue\">new</span> Date();\r\n    <span style=\"color:blue\">var</span> thisYear = nowDate.getFullYear();\r\n    <span style=\"color:blue\">var</span> radius = 10.0;\r\n\r\n    <span style=\"color:blue\">for</span>(<span style=\"color:blue\">var</span> i = 10; i &gt;= 0; i--)\r\n    {\r\n        ratingRequestArray.push({           <span style=\"color:#a31515\">&nbsp;</span><div style=\"color:black; background-color:white\"><pre>             requestUri: <span style=\"color:#a31515\">&quot;UserRatings?latitude=&quot;</span>&#43;latitude&#43;<span style=\"color:#a31515\">&quot;&amp;longitude=&quot;</span>&#43;longitude&#43;<span style=\"color:#a31515\">&quot;&amp;ratingTaget='water'&amp;radius=10&amp;startTime=datetime'&quot;</span>&#43;(thisYear-i)&#43;<span style=\"color:#a31515\">&quot;-01-01T00:01:00Z'&amp;endTime=datetime'&quot;</span> &#43; (thisYear-i) &#43; <span style=\"color:#a31515\">&quot;-12-31T23:59:00Z'&quot;</span>,\r\n             <span style=\"color:green\">//requestUri: &quot;UserRatings?filter=((Longitude sub &quot; &#43; longitude &#43; &quot;) lt &quot; &#43; radius &#43; &quot;) and ((latitude sub &quot; &#43; latitude &#43; &quot;) lt &quot; &#43; radius &#43; &quot;) and ( RatingTime gt datetime'&quot; &#43; (thisYear - i) &#43; &quot;-01-01T00:01:00Z') and (RatingTime lt datetime'&quot; &#43; (thisYear - i) &#43; &quot;-12-31T23:59:00Z') And (RatingTarget eq 'water')&quot;,</span>\r\n             method: <span style=\"color:#a31515\">&quot;GET&quot;</span>\r\n        });\r\n    }\r\n\r\n    OData.request({\r\n        requestUri: ratingServiceUri,\r\n        method: <span style=\"color:#a31515\">&quot;POST&quot;</span>,\r\n        data: { __batchRequests: ratingRequestArray }\r\n    },\r\n    <span style=\"color:blue\">function</span> (data, response) {\r\n\r\n    },\r\n    <span style=\"color:blue\">function</span> (error) {\r\n\r\n    }, OData.batchHandler);\r\n}\r\n</pre>\r\n</div>\r\n</pre>\r\n</div>\r\n<p>When I execute the code, the error handler says following error-message: &quot;Serialization of batches of type complex is not supported&quot;.</p>\r\n<p>Did I made any mistake in the way of calling the dajajs-batching-function? Do you have any idea, how to call this webmethod via odata-batching?</p>\r\n<p>Thanks a lot, if you could help me with my issues.</p>\r\n<p>Regards,</p>\r\n<p>Tino</p>\r\n",
    "PostedDate": "2011-06-27T02:13:19.703-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "634471",
    "ThreadId": "262908",
    "Html": "<p>Hi Tino,</p>\r\n<p>&nbsp; &nbsp; Hope you are doing great. &nbsp;I'm unable to repro the issue that you mention, could you please let us know which DataJS version, browser (and version) you are using?</p>\r\n<p>Thanks</p>\r\n<p>Alex Trigo.&nbsp;</p>",
    "PostedDate": "2011-06-28T18:16:06.773-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "634576",
    "ThreadId": "262908",
    "Html": "<p>Hi ATrigo,</p>\r\n<p>thanks for your reply.</p>\r\n<p>I use the datajs-0.0.3 version with the Internet Explorer 9. But I think it's not a browser issue.</p>\r\n<p>When i looked at the code above this morning, i recognized, that i commented the wrong line.</p>\r\n<p>So the correct requestUri from my issue is:</p>\r\n<pre><pre><span style=\"color: green;\">requestUri: \"UserRatings?filter=((Longitude sub \" + longitude + \") lt \" + radius + \") and ((latitude sub \" + latitude + \") lt \" + radius + \") and ( RatingTime gt datetime'\" + (thisYear - i) + \"-01-01T00:01:00Z') and (RatingTime lt datetime'\" + (thisYear - i) + \"-12-31T23:59:00Z') And (RatingTarget eq 'water')\"</span></pre>\r\n</pre>\r\n<p>I can't understand, why datajs/ODATA can't handle this request, because it's a normal ODATA filter request, that works fine if i run via browser.</p>\r\n<p>But in the batch-request it doesn't work because of the described issue.</p>\r\n<p>Do you maybe know a reason for this issue?</p>\r\n<p>Thanks and regards,</p>\r\n<p>Tino</p>",
    "PostedDate": "2011-06-28T23:38:14.99-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "634997",
    "ThreadId": "262908",
    "Html": "<p>Hi Tino</p>\r\n<p>I'm sorry, but I still can't&nbsp;repro the issue you describe using the sample code above. A couple of pointers... First, I would recommend using datajs.0.0.4 instead :).&nbsp; Second, can you please use the function below and let me know what the alert message is:</p>\r\n<p><span style=\"color: blue;\">function</span> LoadWaterChartData(currentHostname,latitude,longitude) {<br />&nbsp;&nbsp;&nbsp; <span style=\"color: blue;\">var</span> ratingServiceUri = <span style=\"color: #a31515;\">\"http://\"</span> + currentHostname + <span style=\"color: #a31515;\">\"/RatingDataService.svc/$batch\"</span>;<br />&nbsp;&nbsp;&nbsp; <span style=\"color: blue;\">var</span> ratingRequestArray = [];<br />&nbsp;&nbsp;&nbsp; <span style=\"color: blue;\">var</span> nowDate = <span style=\"color: blue;\">new</span> Date();<br />&nbsp;&nbsp;&nbsp; <span style=\"color: blue;\">var</span> thisYear = nowDate.getFullYear();<br />&nbsp;&nbsp;&nbsp; <span style=\"color: blue;\">var</span> radius = 10.0;<br /><br />&nbsp;&nbsp;&nbsp; <span style=\"color: blue;\">for</span>(<span style=\"color: blue;\">var</span> i = 10; i &gt;= 0; i--)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ratingRequestArray.push({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\r\n<div style=\"background-color: white; color: black;\">\r\n<pre>             requestUri: <span style=\"color: #a31515;\">\"UserRatings?latitude=\"</span>+latitude+<span style=\"color: #a31515;\">\"&amp;longitude=\"</span>+longitude+<span style=\"color: #a31515;\">\"&amp;ratingTaget='water'&amp;radius=10&amp;startTime=datetime'\"</span>+(thisYear-i)+<span style=\"color: #a31515;\">\"-01-01T00:01:00Z'&amp;endTime=datetime'\"</span> + (thisYear-i) + <span style=\"color: #a31515;\">\"-12-31T23:59:00Z'\"</span>,\r\n             <span style=\"color: green;\">//requestUri: \"UserRatings?filter=((Longitude sub \" + longitude + \") lt \" + radius + \") and ((latitude sub \" + latitude + \") lt \" + radius + \") and ( RatingTime gt datetime'\" + (thisYear - i) + \"-01-01T00:01:00Z') and (RatingTime lt datetime'\" + (thisYear - i) + \"-12-31T23:59:00Z') And (RatingTarget eq 'water')\",</span>\r\n             method: <span style=\"color: #a31515;\">\"GET\"</span>\r\n        });\r\n    }\r\n\r\n    OData.request({\r\n        requestUri: ratingServiceUri,\r\n        method: <span style=\"color: #a31515;\">\"POST\"</span>,\r\n        data: { __batchRequests: ratingRequestArray }\r\n    },\r\n    <span style=\"color: blue;\">function</span> (data, response) {\r\n\r\n    },\r\n    <span style=\"color: blue;\">function</span> (error) {\r\n\talert(window.JSON.stringify(error));\r\n    }, OData.batchHandler);\r\n}\r\n</pre>\r\n<pre>Finally, can you please also run your code in the debugger using the non-minified datajs build and set a breakpoint in line 4019 if you use datajs.0.0.3 or line 4446 if datajs.0.0.4 is used and let me know what the value of the \"type\" variable is?</pre>\r\n<pre>Regards,</pre>\r\n<pre>Alex Trigo.</pre>\r\n</div>",
    "PostedDate": "2011-06-29T12:37:51.217-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]