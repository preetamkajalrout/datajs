[
  {
    "Id": "1225343",
    "ThreadId": "539763",
    "Html": "I have a webapi odata feed set up and it woks fine. However when I need to include a lot of filters in the request i'm exceeding the url size limitations and it is erroring out. \r<br />\n<br />\nI'm trying to use the datajs batch functionality to get around this issue.\r<br />\n<br />\nI have this javascript code L<br />\n<pre><code>  var requestData = {\n            __batchRequests: [{\n                __changeRequests: [\n                    {\n                        requestUri: suburl, method: &quot;GET&quot;\n                    }\n\n                ]\n            }]\n        };\n\n\n        OData.request({\n            requestUri: FixPortal.Common.serviceUrl.batchDartOdataUrk,\n            method: &quot;POST&quot;,\n            data: requestData\n        }, function (data, textStatus, jqXHR) {\n\n            myDeferred.resolve(data);\n        },\n           function (result) {\n               alert(&quot;Due to unexpected errors we were unable to load Trades&quot; + result.responseText);\n               myDeferred.reject();\n           }\n        );</code></pre>\n\nBut I always get an error saying  &quot;The batch request of media type 'application/json' is not supported.&quot;\r<br />\n<br />\nHere's the request from fiddler:<br />\n<pre><code>POST http://sgm1dtapp1:91/DartOData/api/$batch HTTP/1.1\nContent-Type: application/json\nAccept-Language: en-us\ndataserviceversion: 1.0\nAccept: application/atomsvc+xml;q=0.8, application/json;odata=fullmetadata;q=0.7, application/json;q=0.5, */*;q=0.1\nmaxdataserviceversion: 3.0\nReferer: http://sgm1dsps06/sites/testing/GeraldFixPortal/TradeSummary.aspx\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E; InfoPath.3)\nHost: sgm1dtapp1:91\nContent-Length: 299\nConnection: Keep-Alive\nPragma: no-cache\n\n{&quot;__batchRequests&quot;:[{&quot;__changeRequests&quot;:[{&quot;requestUri&quot;:&quot;/odata/TT_Trades?$select=ID,TrinityTrade_ID,Exchange,Entity,Portfolio,BS,Lots,Delivery,Trader, TradeDate,TradeMonth,Curr,Strike&amp;$expand=TT_PreTrades&amp;$filter=(Processing_Status ne 'BYPASSED') and ((Portfolio eq 'ADVANCES'))&quot;,&quot;method&quot;:&quot;GET&quot;}]}]}</code></pre>\n\nand here's the response<br />\n<blockquote>\nHTTP/1.1 400 Bad Request<br />\nCache-Control: no-cache<br />\nPragma: no-cache<br />\nContent-Type: application/json; charset=utf-8<br />\nExpires: -1<br />\nServer: Microsoft-IIS/7.5<br />\nX-AspNet-Version: 4.0.30319<br />\nX-Powered-By: ASP.NET<br />\nDate: Fri, 21 Mar 2014 19:25:39 GMT<br />\nContent-Length: 82<br />\n</blockquote>\n{&quot;Message&quot;:&quot;The batch request of media type 'application/json' is not supported.&quot;}\r<br />\n<br />\n<br />\nDoes anyone have any idea ghow to fix this?<br />\n",
    "PostedDate": "2014-03-21T12:42:13.983-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]